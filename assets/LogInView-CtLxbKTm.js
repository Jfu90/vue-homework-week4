import{s as h,r as v,u as k,c as n,w as u,v as d,a as r,b as t,i as w,d as c,e as x,f as C,g,o as l,h as b,R as T}from"./index-DjDv5QpG.js";import{u as y,a as V}from"./axios-D1MBucRy.js";const S={class:"formControls",action:"index.html"},R=t("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),B=t("label",{class:"formControls_label",for:"email"},"Email",-1),N={key:0},U=t("label",{class:"formControls_label",for:"pwd"},"密碼",-1),L={key:1},D={__name:"LogInView",setup(M){const p=y(),{emailStore:o,nameStore:m}=h(p),s=v("");document.cookie="todoToken=;expires=Thu, 01 Jan 1970 00:00:00 GMT";const _=k(),f=async()=>{const i="https://todolist-api.hexschool.io";try{const e=await V.post(`${i}/users/sign_in`,{email:o.value,password:s.value});m.value=e.data.nickname,document.cookie=`todoToken=${e.data.token};expires=${new Date(e.data.exp*1e3).toUTCString()}`,o.value="",_.push("/todolist")}catch(e){alert(e.response.data.message)}};return(i,e)=>(l(),n("form",S,[R,B,u(t("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":e[0]||(e[0]=a=>w(o)?o.value=a:null)},null,512),[[d,r(o)]]),r(o)?c("",!0):(l(),n("span",N,"此欄位不可留空")),U,u(t("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":e[1]||(e[1]=a=>s.value=a)},null,512),[[d,s.value]]),s.value.length&&s.value.length<6?(l(),n("span",L,"密碼長度不足6")):c("",!0),t("input",{class:"formControls_btnSubmit",type:"button",value:"登入",onClick:x(f,["prevent"])}),C(r(T),{class:"formControls_btnLink",to:"/signup"},{default:g(()=>[b("註冊帳號")]),_:1})]))}};export{D as default};
